function a0_0x5931(){const _0x338376=['actedDataMap','72495XAlJLl','ユーザ名は\x20','leave_room','http','2250930oteOWb','padEnd','userName','finish_play','floor','length','user_disconnect_in_game','members','reason','memberCount','from','express','all_ready_next_card','room','socket.io','currentCard','fastestUserName','PORT','takenTimeMS','4siLzCA','values','delete','leave_room_ok','ready_play','map','joinroom_duplicated_usename','minTakenTimeMS','leaveMember','18NuhWHF','prepare_play','176oYgCVb','joinroom_invaid_parameter','userPointsMap','success','all_ready_play','sockets','disconnect','slice','connection','rank','splice','roomName','cardId','tag','MAX_VALUE','assign','emit','correct','sort','random','joinroom_playing_now','env','totalCount','card_phase_update_actinfo','forEach','601614QPZorR','listen','room_member_list','set','get','wrong','toFixed','currentTag','public','size','currentIndex','608995vwdtKn','ownerUserName','substring','rankedUserResults','ready_next_card','readyCount','game_end','to_waiting_room','value','add','restCards','dataId','2633151ydHWwS','Server','leave','play','cards','playing_now','game','clear','use','card_phase_card_result','651194pbsZjU','start_play','has','join_room','takenTimeSec','\x20文字以下にしてください','reduce','6853707UJARSl'];a0_0x5931=function(){return _0x338376;};return a0_0x5931();}const a0_0x7e9ebc=a0_0x1707;(function(_0x59f60a,_0x4f9bae){const _0x1e1dba=a0_0x1707,_0xd255ad=_0x59f60a();while(!![]){try{const _0x37a733=-parseInt(_0x1e1dba(0xdd))/0x1+-parseInt(_0x1e1dba(0x99))/0x2+parseInt(_0x1e1dba(0x8f))/0x3*(parseInt(_0x1e1dba(0xb9))/0x4)+-parseInt(_0x1e1dba(0xe8))/0x5*(parseInt(_0x1e1dba(0xc2))/0x6)+parseInt(_0x1e1dba(0xa0))/0x7+-parseInt(_0x1e1dba(0xc4))/0x8*(-parseInt(_0x1e1dba(0xa2))/0x9)+-parseInt(_0x1e1dba(0xa6))/0xa;if(_0x37a733===_0x4f9bae)break;else _0xd255ad['push'](_0xd255ad['shift']());}catch(_0x46ab6b){_0xd255ad['push'](_0xd255ad['shift']());}}}(a0_0x5931,0x7e0e7));const newRandomArray=_0x4d67fa=>{const _0x354f8c=a0_0x1707,_0x180706=Array[_0x354f8c(0xb0)](_0x4d67fa);for(let _0x285197=_0x180706[_0x354f8c(0xab)]-0x1;_0x285197>=0x0;_0x285197--){const _0x1e717d=Math[_0x354f8c(0xaa)](Math[_0x354f8c(0xd7)]()*(_0x285197+0x1));[_0x180706[_0x285197],_0x180706[_0x1e717d]]=[_0x180706[_0x1e717d],_0x180706[_0x285197]];}return _0x180706;},nextRandomString=()=>{const _0x1f6422=a0_0x1707;return Math['random']()['toString'](0x24)[_0x1f6422(0xea)](0x2)[_0x1f6422(0xa7)](0xb,'0');},getRandomStrings=_0x5e4d50=>{const _0x1fc644=a0_0x1707,_0x347b7a=new Set();while(_0x347b7a['size']<_0x5e4d50){_0x347b7a[_0x1fc644(0x8c)](nextRandomString());}return Array[_0x1fc644(0xb0)](_0x347b7a);},getRandomRanged=(_0x1ba38,_0x436a8c)=>{const _0x2f2ba2=a0_0x1707;return Math[_0x2f2ba2(0xaa)](_0x1ba38+Math[_0x2f2ba2(0xd7)]()*(_0x436a8c-_0x1ba38));},getRankedArray=(_0x5b4f52,_0x1731ae)=>{const _0x3c6d86=a0_0x1707,_0x57a4dc=_0x5b4f52[_0x3c6d86(0xbe)](_0x596a13=>Object['assign']({},_0x596a13))[_0x3c6d86(0xd6)](_0x1731ae);return _0x57a4dc[_0x3c6d86(0x9f)]((_0x5690e3,_0x51d799,_0x273708)=>{const _0x3af5df=_0x3c6d86;return!_0x5690e3?_0x51d799[_0x3af5df(0xcd)]=0x1:_0x51d799[_0x3af5df(0xcd)]=_0x1731ae(_0x51d799,_0x5690e3)===0x0?_0x5690e3[_0x3af5df(0xcd)]:_0x273708+0x1,_0x51d799;},null),_0x57a4dc;},express=require(a0_0x7e9ebc(0xb1)),app=express();app[a0_0x7e9ebc(0x97)](express['static'](a0_0x7e9ebc(0xe5)));const http=require(a0_0x7e9ebc(0xa5))[a0_0x7e9ebc(0x90)](app);function a0_0x1707(_0x4ae79e,_0x7bb84){const _0x593141=a0_0x5931();return a0_0x1707=function(_0x17079a,_0x3a6e03){_0x17079a=_0x17079a-0x86;let _0x75854c=_0x593141[_0x17079a];return _0x75854c;},a0_0x1707(_0x4ae79e,_0x7bb84);}http[a0_0x7e9ebc(0xde)](process[a0_0x7e9ebc(0xd9)][a0_0x7e9ebc(0xb7)]||0xbb8);const io=require(a0_0x7e9ebc(0xb4))(http),rooms=((()=>{const _0x3c78ba=new Map(),_0x3bd84b=_0x11aecc=>{return{'play':![],'game':{'actedDataMap':new Map(),'userPointsMap':new Map()},'ownerUserName':_0x11aecc,'members':new Set([_0x11aecc]),'getMemberList':function(){const _0x5d4e3a=a0_0x1707;return Array[_0x5d4e3a(0xb0)](this['members']);}};};return{'getMemberList':_0x19bdb3=>{const _0x5e8d6e=a0_0x1707;return _0x3c78ba[_0x5e8d6e(0xe1)](_0x19bdb3)?.['getMemberList']()??[];},'joinMember':(_0x4e6352,_0x275a15,_0x5816a9)=>{const _0x2461e2=a0_0x1707;if(!_0x3c78ba[_0x2461e2(0x9b)](_0x4e6352)){const _0x48e066=_0x3bd84b(_0x275a15);return _0x3c78ba['set'](_0x4e6352,_0x48e066),{'success':!![],'room':_0x48e066};}else{const _0x4ac891=_0x3c78ba[_0x2461e2(0xe1)](_0x4e6352);if(_0x4ac891[_0x2461e2(0x92)])return{'success':![],'reason':_0x2461e2(0x94)};return _0x4ac891[_0x2461e2(0xad)][_0x2461e2(0x9b)](_0x275a15)?{'success':![],'reason':'duplicated_usename'}:(_0x4ac891['members'][_0x2461e2(0x8c)](_0x275a15),{'success':!![],'room':_0x4ac891});}},'leaveMember':(_0x41a37e,_0x2affe)=>{const _0x4a774c=a0_0x1707,_0x4253a0=_0x3c78ba[_0x4a774c(0xe1)](_0x41a37e);if(!_0x4253a0)return;const _0x765aca=_0x4253a0[_0x4a774c(0xad)];_0x765aca[_0x4a774c(0xbb)](_0x2affe),_0x765aca[_0x4a774c(0xe6)]===0x0&&_0x3c78ba[_0x4a774c(0xbb)](_0x41a37e),_0x2affe===_0x4253a0[_0x4a774c(0xe9)]&&(_0x4253a0[_0x4a774c(0xe9)]=_0x765aca['values']()['next']()[_0x4a774c(0x8b)]);}};})());let debug_user_number=0x0;const USERNAME_MAX_LENGTH=0xa;io[a0_0x7e9ebc(0xc9)]['on'](a0_0x7e9ebc(0xcc),_0x4c73df=>{const _0x10f81e=a0_0x7e9ebc,_0x436e0e={};let _0x104c19;io['to'](_0x4c73df['id'])[_0x10f81e(0xd4)]('initialize',{'userNameMaxLength':USERNAME_MAX_LENGTH,'userName':'user'+ ++debug_user_number});const _0x21159c=_0x84a695=>{const _0x4912f9=_0x10f81e;return{'memberList':_0x84a695['getMemberList'](),'ownerUserName':_0x84a695[_0x4912f9(0xe9)]};};_0x4c73df['on'](_0x10f81e(0x9c),_0x1af397=>{const _0x5255c3=_0x10f81e;if(_0x436e0e[_0x5255c3(0xcf)])return;if(!_0x1af397['appId']||!_0x1af397[_0x5255c3(0x8e)]){_0x1af397[_0x5255c3(0xae)]='',io['to'](_0x4c73df['id'])['emit']('joinroom_invaid_parameter',_0x1af397);return;}if(!_0x1af397['roomName']||!_0x1af397[_0x5255c3(0xa8)]){_0x1af397['reason']='部屋名・ユーザ名は\x201\x20文字以上必要です',io['to'](_0x4c73df['id'])[_0x5255c3(0xd4)](_0x5255c3(0xc5),_0x1af397);return;}if(_0x1af397[_0x5255c3(0xa8)][_0x5255c3(0xab)]>USERNAME_MAX_LENGTH){_0x1af397[_0x5255c3(0xae)]=_0x5255c3(0xa3)+USERNAME_MAX_LENGTH+_0x5255c3(0x9e),io['to'](_0x4c73df['id'])['emit'](_0x5255c3(0xc5),_0x1af397);return;}const _0x46b5d7=_0x1af397['appId']+'-'+_0x1af397['dataId']+'-'+_0x1af397[_0x5255c3(0xcf)],_0xf8542a=rooms['joinMember'](_0x46b5d7,_0x1af397[_0x5255c3(0xa8)]);if(_0xf8542a[_0x5255c3(0xc7)]){_0x436e0e[_0x5255c3(0xa8)]=_0x1af397['userName'],_0x436e0e['roomName']=_0x46b5d7,_0x4c73df['join'](_0x436e0e['roomName']),_0x436e0e['room']=_0xf8542a[_0x5255c3(0xb3)],_0x104c19=_0x436e0e[_0x5255c3(0xb3)][_0x5255c3(0x95)];const _0x2336a7=_0x436e0e[_0x5255c3(0xb3)]['getMemberList']();io['to'](_0x436e0e[_0x5255c3(0xcf)])[_0x5255c3(0xd4)]('room_member_list',_0x21159c(_0x436e0e['room']));}else{if(_0xf8542a[_0x5255c3(0xae)]===_0x5255c3(0x94))io['to'](_0x4c73df['id'])[_0x5255c3(0xd4)](_0x5255c3(0xd8),_0x1af397);else _0xf8542a[_0x5255c3(0xae)]==='duplicated_usename'&&io['to'](_0x4c73df['id'])[_0x5255c3(0xd4)](_0x5255c3(0xbf),_0x1af397);}}),_0x4c73df['on'](_0x10f81e(0xa4),_0x2f8695=>{const _0x43e4c2=_0x10f81e;if(!_0x436e0e[_0x43e4c2(0xcf)])return;rooms['leaveMember'](_0x436e0e[_0x43e4c2(0xcf)],_0x436e0e['userName']),_0x4c73df[_0x43e4c2(0x91)](_0x436e0e[_0x43e4c2(0xcf)]),!_0x436e0e[_0x43e4c2(0xb3)][_0x43e4c2(0x92)]?io['to'](_0x436e0e[_0x43e4c2(0xcf)])[_0x43e4c2(0xd4)](_0x43e4c2(0xdf),_0x21159c(_0x436e0e[_0x43e4c2(0xb3)])):(_0x436e0e['room'][_0x43e4c2(0x92)]=![],io['to'](_0x436e0e[_0x43e4c2(0xcf)])[_0x43e4c2(0xd4)]('user_disconnect_in_game',Object[_0x43e4c2(0xd3)]({'exitUserName':_0x436e0e[_0x43e4c2(0xa8)]},_0x21159c(_0x436e0e[_0x43e4c2(0xb3)])))),_0x436e0e[_0x43e4c2(0xcf)]=null,_0x436e0e[_0x43e4c2(0xa8)]=null,_0x436e0e[_0x43e4c2(0xb3)]=null,io['to'](_0x4c73df['id'])['emit'](_0x43e4c2(0xbc));}),_0x4c73df['on'](_0x10f81e(0xca),()=>{const _0x39dd91=_0x10f81e;_0x436e0e[_0x39dd91(0xcf)]&&(!_0x436e0e[_0x39dd91(0xb3)]['play']?(rooms[_0x39dd91(0xc1)](_0x436e0e[_0x39dd91(0xcf)],_0x436e0e[_0x39dd91(0xa8)]),_0x4c73df[_0x39dd91(0x91)](_0x436e0e[_0x39dd91(0xcf)]),io['to'](_0x436e0e[_0x39dd91(0xcf)])[_0x39dd91(0xd4)]('room_member_list',_0x21159c(_0x436e0e[_0x39dd91(0xb3)]))):(_0x436e0e[_0x39dd91(0xb3)]['play']=![],rooms['leaveMember'](_0x436e0e[_0x39dd91(0xcf)],_0x436e0e[_0x39dd91(0xa8)]),_0x4c73df['leave'](_0x436e0e[_0x39dd91(0xcf)]),io['to'](_0x436e0e[_0x39dd91(0xcf)])[_0x39dd91(0xd4)](_0x39dd91(0xac),Object[_0x39dd91(0xd3)]({'exitUserName':_0x436e0e[_0x39dd91(0xa8)]},_0x21159c(_0x436e0e['room'])))));}),_0x4c73df['on'](_0x10f81e(0xa9),_0x21b2a0=>{const _0x415c7e=_0x10f81e;_0x436e0e[_0x415c7e(0xa8)]===_0x436e0e[_0x415c7e(0xb3)][_0x415c7e(0xe9)]?(_0x436e0e[_0x415c7e(0xb3)][_0x415c7e(0x92)]=![],io['to'](_0x436e0e[_0x415c7e(0xcf)])[_0x415c7e(0xd4)]('to_waiting_room',_0x21159c(_0x436e0e[_0x415c7e(0xb3)]))):io['to'](_0x4c73df['id'])[_0x415c7e(0xd4)](_0x415c7e(0x8a),_0x21159c(_0x436e0e[_0x415c7e(0xb3)]));}),_0x4c73df['on'](_0x10f81e(0x9a),_0x48afca=>{const _0x3ed078=_0x10f81e;if(_0x436e0e['userName']===_0x436e0e['room']['ownerUserName']){_0x436e0e[_0x3ed078(0xb3)]['play']=!![],_0x104c19['readyCount']=0x0,_0x104c19[_0x3ed078(0xaf)]=_0x436e0e[_0x3ed078(0xb3)][_0x3ed078(0xad)][_0x3ed078(0xe6)];const _0x1f7537=_0x48afca[_0x3ed078(0x93)],_0x39c698=getRandomStrings(_0x1f7537[_0x3ed078(0xab)]);_0x1f7537[_0x3ed078(0xdc)]((_0xe8b05e,_0x2d3aac)=>_0xe8b05e[_0x3ed078(0xd1)]=_0x39c698[_0x2d3aac]),_0x104c19[_0x3ed078(0x8d)]=newRandomArray(_0x1f7537)[_0x3ed078(0xcb)](0x0,_0x48afca['useCardCount']);const _0x4975ad=_0x104c19['restCards']['map'](_0x41fda1=>_0x41fda1['tag']);_0x104c19[_0x3ed078(0xda)]=_0x104c19[_0x3ed078(0x8d)][_0x3ed078(0xab)],_0x104c19[_0x3ed078(0xc6)][_0x3ed078(0x96)](),_0x436e0e['room']['members'][_0x3ed078(0xdc)](_0x5d95ec=>{const _0x2c4582=_0x3ed078;_0x104c19[_0x2c4582(0xc6)][_0x2c4582(0xe0)](_0x5d95ec,{'userName':_0x5d95ec,'correct':0x0,'wrong':0x0});}),io['to'](_0x436e0e[_0x3ed078(0xcf)])[_0x3ed078(0xd4)](_0x3ed078(0xc3),{'tagSeq':_0x39c698,'displaySeq':_0x4975ad,'showData':_0xb0abb9()});}}),_0x4c73df['on'](_0x10f81e(0xbd),()=>{const _0x395839=_0x10f81e;++_0x104c19['readyCount']===_0x436e0e['room'][_0x395839(0xad)][_0x395839(0xe6)]&&(_0x104c19[_0x395839(0x88)]=0x0,io['to'](_0x436e0e[_0x395839(0xcf)])[_0x395839(0xd4)](_0x395839(0xc8)));}),_0x4c73df['on'](_0x10f81e(0x87),()=>{const _0x17b86e=_0x10f81e;++_0x104c19[_0x17b86e(0x88)]===_0x436e0e[_0x17b86e(0xb3)][_0x17b86e(0xad)]['size']&&(io['to'](_0x436e0e[_0x17b86e(0xcf)])['emit'](_0x17b86e(0xb2)),_0x3df632());});const _0xb0abb9=(_0x5428f7=![])=>{const _0x473d44=_0x10f81e,_0x1f8a73=Array[_0x473d44(0xb0)](_0x104c19[_0x473d44(0xc6)]['values']()),_0x1d91e8={'count':{'total':_0x104c19[_0x473d44(0xda)],'rest':_0x104c19[_0x473d44(0x8d)]['length']},'userResults':_0x1f8a73[_0x473d44(0xbe)](_0x4e7697=>Object[_0x473d44(0xd3)]({},_0x4e7697))};return _0x5428f7&&(_0x1d91e8[_0x473d44(0x86)]=getRankedArray(_0x1f8a73,(_0x40516d,_0x4f8ff0)=>_0x40516d[_0x473d44(0xd5)]!==_0x4f8ff0[_0x473d44(0xd5)]?-_0x40516d['correct']+_0x4f8ff0[_0x473d44(0xd5)]:_0x40516d['wrong']-_0x4f8ff0[_0x473d44(0xe2)])),_0x1d91e8;},_0x3df632=()=>{const _0x2c9520=_0x10f81e;if(_0x104c19[_0x2c9520(0x8d)][_0x2c9520(0xab)]<=0x1){io['to'](_0x436e0e[_0x2c9520(0xcf)])['emit'](_0x2c9520(0x89),_0xb0abb9(!![]));return;}_0x104c19[_0x2c9520(0xe7)]=getRandomRanged(0x0,_0x104c19[_0x2c9520(0x8d)]['length']),_0x104c19['currentCard']=_0x104c19[_0x2c9520(0x8d)][_0x104c19[_0x2c9520(0xe7)]],_0x104c19[_0x2c9520(0xe4)]=_0x104c19['currentCard'][_0x2c9520(0xd1)],_0x104c19[_0x2c9520(0xa1)]['clear'](),_0x104c19[_0x2c9520(0xc0)]=Number[_0x2c9520(0xd2)],_0x104c19[_0x2c9520(0xb6)]=null,io['to'](_0x436e0e['roomName'])[_0x2c9520(0xd4)]('next_card',{'currentTag':_0x104c19[_0x2c9520(0xb5)][_0x2c9520(0xd1)]});};_0x4c73df['on']('card_phase_acted',_0x437eb6=>{const _0xab3184=_0x10f81e;if(_0x104c19[_0xab3184(0xe4)]!==_0x437eb6[_0xab3184(0xe4)])return;if(_0x437eb6[_0xab3184(0xa8)]!==_0x436e0e[_0xab3184(0xa8)])return;if(_0x104c19['actedDataMap'][_0xab3184(0x9b)](_0x436e0e[_0xab3184(0xa8)]))return;_0x104c19[_0xab3184(0xa1)][_0xab3184(0xe0)](_0x436e0e[_0xab3184(0xa8)],_0x437eb6),_0x437eb6['action']==='click'&&_0x437eb6[_0xab3184(0xd5)]&&_0x437eb6[_0xab3184(0xd0)]===_0x104c19['currentCard']['id']&&(_0x437eb6[_0xab3184(0xb8)]<_0x104c19[_0xab3184(0xc0)]&&(_0x104c19[_0xab3184(0xb6)]=_0x436e0e[_0xab3184(0xa8)],_0x104c19[_0xab3184(0xc0)]=_0x437eb6[_0xab3184(0xb8)]),_0x437eb6[_0xab3184(0x9d)]=(_0x437eb6[_0xab3184(0xb8)]/0x3e8)[_0xab3184(0xe3)](0x2)),_0x104c19[_0xab3184(0xa1)][_0xab3184(0xe6)]!==_0x104c19[_0xab3184(0xaf)]?_0x5db4d9():_0x20ccfa();});const _0x2ad518=()=>{const _0x476897=_0x10f81e;return Array[_0x476897(0xb0)](_0x104c19[_0x476897(0xa1)][_0x476897(0xba)]());},_0x5db4d9=()=>{const _0x3b1a80=_0x10f81e;_0x104c19[_0x3b1a80(0xe4)]&&io['to'](_0x436e0e['roomName'])[_0x3b1a80(0xd4)](_0x3b1a80(0xdb),{'currentTag':_0x104c19[_0x3b1a80(0xe4)],'minTakenTimeMS':_0x104c19[_0x3b1a80(0xb6)]?_0x104c19[_0x3b1a80(0xc0)]:null,'actionResults':_0x2ad518()});},_0x20ccfa=()=>{const _0x4395a3=_0x10f81e;if(_0x104c19[_0x4395a3(0xe4)]){const _0x480dca=_0x104c19['currentTag'];_0x104c19[_0x4395a3(0xe4)]=null,_0x104c19[_0x4395a3(0x88)]=0x0;_0x104c19[_0x4395a3(0xa1)][_0x4395a3(0x9b)](_0x104c19[_0x4395a3(0xb6)])&&_0x104c19['restCards'][_0x4395a3(0xce)](_0x104c19[_0x4395a3(0xe7)],0x1);_0x104c19[_0x4395a3(0xc6)][_0x4395a3(0xdc)](_0x29b4d8=>{const _0x5c7c42=_0x4395a3,_0x4badf1=_0x104c19['actedDataMap'][_0x5c7c42(0xe1)](_0x29b4d8[_0x5c7c42(0xa8)]);if(_0x4badf1[_0x5c7c42(0xa8)]===_0x104c19[_0x5c7c42(0xb6)])_0x29b4d8[_0x5c7c42(0xd5)]++;else _0x4badf1[_0x5c7c42(0xd5)]===![]&&_0x29b4d8[_0x5c7c42(0xe2)]++;});const _0x42e957=Object['assign']({'card':{'currentTag':_0x480dca,'cardId':_0x104c19[_0x4395a3(0xb5)]['id'],'winnerUserName':_0x104c19[_0x4395a3(0xb6)]}},_0xb0abb9());_0x42e957['actionResults']=_0x2ad518(),io['to'](_0x436e0e['roomName'])[_0x4395a3(0xd4)](_0x4395a3(0x98),_0x42e957);}};});